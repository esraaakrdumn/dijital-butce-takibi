<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Dijital B√ºt√ße Takibi</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    

    <style>
    :root {
        --bg-color: #f4f6f9;
        --card-bg: #ffffff;
        --text-color: #1f2937;
        --navbar-bg: linear-gradient(90deg, #111827, #1f2937);
    }

    body.dark-mode {
        --bg-color: #0f172a;
        --card-bg: #1e293b;
        --text-color: #e2e8f0;
        --navbar-bg: linear-gradient(90deg, #0f172a, #1e293b);
    }

    body {
        background: var(--bg-color);
        font-family: 'Inter', sans-serif;
        color: var(--text-color);
        transition: background 0.3s ease, color 0.3s ease;
    }

    .card {
        background: var(--card-bg);
        border-radius: 15px;
        transition: all 0.25s ease;
    }

    .card:hover {
        transform: translateY(-6px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    }

    .navbar {
        background: var(--navbar-bg);
    }

    .container {
        max-width: 1100px;
    }

    .alert {
        border-radius: 10px;
    }

    #themeToggle {
        transition: opacity 0.3s ease, transform 0.3s ease;
    }

    body.dark-mode .card {
        background: #1f2937;
        color: #e5e7eb;
    }

    body.dark-mode .form-control {
        background-color: #374151;
        border: 1px solid #4b5563;
        color: #f9fafb;
    }

    body.dark-mode .form-control::placeholder {
        color: #9ca3af;
    }

    body.dark-mode label {
        color: #e5e7eb;
    }

    body.dark-mode .text-muted {
        color: #9ca3af !important;
    }

    body.dark-mode .btn-outline-light {
        border-color: #94a3b8;
        color: #e2e8f0;
    }

    /* ================= DASHBOARD BUTTON ================= */

    .btn-dashboard {
        background-color: #2563eb !important;
        border: none !important;
        color: white !important;
    }

    .btn-dashboard:hover {
        background-color: #1d4ed8 !important;
    }

    /* ================= SOFT CARD COLORS ================= */

    .card-income {
        background: #34d399 !important;   /* yumu≈üak ye≈üil */
        color: white;
        border: none;
    }

    .card-expense {
        background: #f87171 !important;   /* yumu≈üak kƒ±rmƒ±zƒ± */
        color: white;
        border: none;
    }

    .card-balance {
        background: #374151 !important;   /* yumu≈üak koyu gri */
        color: white;
        border: none;
    }

</style>

</head>

<body>

<nav class="navbar navbar-dark px-4 py-3 shadow-sm">
    <div class="container d-flex justify-content-between align-items-center">

        <a class="navbar-brand fw-bold text-white fs-4" href="{{ url_for('home') }}">
            Dijital B√ºt√ße Takibi üí∞
        </a>

        <div class="d-flex align-items-center">

            <button id="themeToggle"
                    onclick="toggleDarkMode()"
                    class="btn btn-outline-light btn-sm me-3">
                üåô
            </button>

            {% if current_user.is_authenticated %}
                  <a href="{{ url_for('dashboard') }}" class="btn btn-dashboard btn-sm me-2"> Panelim</a>



                <a href="{{ url_for('logout') }}" class="btn btn-outline-light btn-sm">√áƒ±kƒ±≈ü</a>
            {% else %}
                 <a href="{{ url_for('login') }}" class="btn btn-outline-secondary btn-sm me-2 text-white border-light">
                    Giri≈ü Yap
                 </a>


                <a href="{{ url_for('register') }}" class="btn btn-success btn-sm">
                    Kayƒ±t Ol
                </a>
            {% endif %}

        </div>

    </div>
</nav>

<div class="container mt-4">

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-container"
                 style="position: fixed; top: 90px; right: 25px; z-index: 9999; width: 320px;">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} shadow flash-msg mb-2">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    {% block content %}{% endblock %}

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {

    const btn = document.getElementById("themeToggle");

    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
        btn.textContent = "‚òÄÔ∏è";
    } else {
        btn.textContent = "üåô";
    }

    setTimeout(function () {
        document.querySelectorAll(".flash-msg").forEach(function (el) {
            el.style.transition = "all 0.6s ease";
            el.style.opacity = "0";
            el.style.transform = "translateX(30px)";
            setTimeout(() => el.remove(), 600);
        });
    }, 5000);

});

function toggleDarkMode() {

    const body = document.body;
    const btn = document.getElementById("themeToggle");

    btn.style.opacity = "0";
    btn.style.transform = "scale(0.6) rotate(90deg)";

    setTimeout(() => {

        body.classList.toggle("dark-mode");

        if (body.classList.contains("dark-mode")) {
            btn.textContent = "‚òÄÔ∏è";
            localStorage.setItem("theme", "dark");
        } else {
            btn.textContent = "üåô";
            localStorage.setItem("theme", "light");
        }

        btn.style.opacity = "1";
        btn.style.transform = "scale(1) rotate(0deg)";

    }, 250);
}
</script>

</body>
</html>
